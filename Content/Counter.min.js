function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG;a=window;b=a.Counter=a.Counter||{};c=b.Client=b.Client||{};d=a.StartupCode$Counter$Client=a.StartupCode$Counter$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.UI=e.UI||{};g=f.Var=f.Var||{};h=e.Obj=e.Obj||{};i=e.Operators=e.Operators||{};j=e.Unchecked=e.Unchecked||{};k=a.System=a.System||{};l=k.Guid=k.Guid||{};m=e.List=e.List||{};n=m.T=m.T||{};o=c.Message=c.Message||{};p=e.Arrays=e.Arrays||{};q=f.Templating=f.Templating||{};r=q.Runtime=q.Runtime||{};s=r.Server=r.Server||{};t=s.Handler=s.Handler||{};u=f.View=f.View||{};v=s.Runtime=s.Runtime||{};w=s.TemplateInstance=s.TemplateInstance||{};x=f.ConcreteVar=f.ConcreteVar||{};y=f.Snap=f.Snap||{};z=e.Collections=e.Collections||{};A=z.Dictionary=z.Dictionary||{};B=z.HashSet=z.HashSet||{};C=r.Client=r.Client||{};D=e.Seq=e.Seq||{};E=f.Abbrev=f.Abbrev||{};F=E.Fresh=E.Fresh||{};G=e.JavaScript=e.JavaScript||{};H=G.Pervasives=G.Pervasives||{};I=z.DictionaryUtil=z.DictionaryUtil||{};J=e.Enumerator=e.Enumerator||{};K=a.Object;L=J.T=J.T||{};M=f.Doc=f.Doc||{};N=e.Numeric=e.Numeric||{};O=G.JSModule=G.JSModule||{};P=f.DomUtility=f.DomUtility||{};Q=a.EventTarget;R=a.Node;S=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};T=e.Slice=e.Slice||{};U=f.Docs=f.Docs||{};V=e.Strings=e.Strings||{};W=a.CharacterData;X=f.Elt=f.Elt||{};Y=E.Mailbox=E.Mailbox||{};Z=f.DocElemNode=f.DocElemNode||{};_0=z.HashSetUtil=z.HashSetUtil||{};_1=e.Queue=e.Queue||{};_2=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};_3=f.Attrs=f.Attrs||{};_4=f.CheckedInput=f.CheckedInput||{};_5=f.AttrModule=f.AttrModule||{};_6=f.AttrProxy=f.AttrProxy||{};_7=f.Array=f.Array||{};_8=f.Updates=f.Updates||{};_9=f.Client=f.Client||{};_=_9.Docs=_9.Docs||{};$=_.RunState=_.RunState||{};ba=_.NodeSet=_.NodeSet||{};bb=f.An=f.An||{};bc=_9.Attrs=_9.Attrs||{};bd=bc.Dyn=bc.Dyn||{};be=f.String=f.String||{};bf=e.Concurrency=e.Concurrency||{};bg=f.Anims=f.Anims||{};bh=f.AppendList=f.AppendList||{};bi=_9.Settings=_9.Settings||{};bj=e.Char=e.Char||{};bk=f.DynamicAttrNode=f.DynamicAttrNode||{};bl=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bm=bf.AsyncBody=bf.AsyncBody||{};bn=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bo=bf.CT=bf.CT||{};bp=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bq=E.HashSet=E.HashSet||{};br=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bs=bf.Scheduler=bf.Scheduler||{};bt=e.CancellationTokenSource=e.CancellationTokenSource||{};bu=f.Easing=f.Easing||{};bv=e.OperationCanceledException=e.OperationCanceledException||{};bw=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bx=e.Lazy=e.Lazy||{};by=_.DomNodes=_.DomNodes||{};bz=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};bA=bz.LazyRecord=bz.LazyRecord||{};bB=a.IntelliFactory;bC=bB&&bB.Runtime;bD=a.Math;bE=a.console;bF=a.jQuery;bG=a.Date;c.Main=function(){(c.view())(c.init());};c.view=function(){d.$cctor();return d.view;};c.init=function(){d.$cctor();return d.init;};c.update=function(bH,bI){return bH.$==1?bI-1:bI+1;};d.$cctor=function(){var bH,bI,bJ,bK,bL,bM,bN,bO;d.$cctor=a.ignore;function bP(bS){bH.Set(c.update(bS,bH.Get()));}function bQ(bS){bP(o.Increment);}function bR(bS){bP(o.Decrement);}d.init=0;d.view=(bH=g.Create$1(c.init()),(bI=(bJ=(bK=(bL=[null],[bL,(bM=l.NewGuid(),a.String(bM)),new n({$:1,$0:{$:5,$0:"onincrement",$1:true,$2:function(bS){return function(bT){return bQ({Vars:bL[0],Target:bS,Event:bT});};}},$1:n.Empty})]),[bK[0],bK[1],new n({$:1,$0:(bN=bK[0],{$:5,$0:"ondecrement",$1:true,$2:function(bS){return function(bT){return bR({Vars:bN[0],Target:bS,Event:bT});};}}),$1:bK[2]})]),[bJ[0],bJ[1],new n({$:1,$0:{$:2,$0:"counter",$1:u.Map(a.String,bH.get_View())},$1:bJ[2]})]),bO=t.CompleteHoles(bI[1],bI[2],[]),bI[0][0]=new w.New(bO[1],v.RunTemplate(bO[0])),function(bS){bH.Set(bS);}));};g.Create$1=function(bH){return new x.New(false,y.New({$:2,$0:bH,$1:[]}),bH);};h=e.Obj=bC.Class({Equals:function(bH){return this===bH;},GetHashCode:function(){return -1;}},null,h);g=f.Var=bC.Class({},h,g);g.New=bC.Ctor(function(){},g);i.FailWith=function(bH){throw a.Error(bH);};i.KeyValue=function(bH){return[bH.K,bH.V];};j.Equals=function(bH,bI){var bJ,bK,bL,bM;if(bH===bI)return true;else{bJ=typeof bH;if(bJ=="object"){if(bH===null||bH===void 0||bI===null||bI===void 0)return false;else if("Equals"in bH)return bH.Equals(bI);else if(bH instanceof a.Array&&bI instanceof a.Array)return j.arrayEquals(bH,bI);else if(bH instanceof a.Date&&bI instanceof a.Date)return j.dateEquals(bH,bI);else{bK=[true];for(var bN in bH)if(function(bO){bK[0]=!bH.hasOwnProperty(bO)||bI.hasOwnProperty(bO)&&j.Equals(bH[bO],bI[bO]);return!bK[0];}(bN))break;if(bK[0]){for(var bO in bI)if(function(bP){bK[0]=!bI.hasOwnProperty(bP)||bH.hasOwnProperty(bP);return!bK[0];}(bO))break;}return bK[0];}}else return bJ=="function"&&("$Func"in bH?bH.$Func===bI.$Func&&bH.$Target===bI.$Target:"$Invokes"in bH&&"$Invokes"in bI&&j.arrayEquals(bH.$Invokes,bI.$Invokes));}};j.Hash=function(bH){var bI;bI=typeof bH;return bI=="function"?0:bI=="boolean"?bH?1:0:bI=="number"?bH:bI=="string"?j.hashString(bH):bI=="object"?bH==null?0:bH instanceof a.Array?j.hashArray(bH):j.hashObject(bH):0;};j.arrayEquals=function(bH,bI){var bJ,bK;if(p.length(bH)===p.length(bI)){bJ=true;bK=0;while(bJ&&bK<p.length(bH)){!j.Equals(p.get(bH,bK),p.get(bI,bK))?bJ=false:void 0;bK=bK+1;}return bJ;}else return false;};j.dateEquals=function(bH,bI){return bH.getTime()===bI.getTime();};j.hashString=function(bH){var bI,bJ,bK;if(bH===null)return 0;else{bI=5381;for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++)bI=j.hashMix(bI,bH[bJ].charCodeAt());return bI;}};j.hashArray=function(bH){var bI,bJ,bK;bI=-34948909;for(bJ=0,bK=p.length(bH)-1;bJ<=bK;bJ++)bI=j.hashMix(bI,j.Hash(p.get(bH,bJ)));return bI;};j.hashObject=function(bH){var bI,bJ;if("GetHashCode"in bH)return bH.GetHashCode();else{bI=[0];for(var bK in bH)if(function(bL){bI[0]=j.hashMix(j.hashMix(bI[0],j.hashString(bL)),j.Hash(bH[bL]));return false;}(bK))break;return bI[0];}};j.hashMix=function(bH,bI){return(bH<<5)+bH+bI;};j.Compare=function(bH,bI){var bJ,bK,bL,bM,bN,bO;if(bH===bI)return 0;else{bK=typeof bH;switch(bK=="function"?1:bK=="boolean"?2:bK=="number"?2:bK=="string"?2:bK=="object"?3:0){case 0:return typeof bI=="undefined"?0:-1;break;case 1:return i.FailWith("Cannot compare function values.");break;case 2:return bH<bI?-1:1;break;case 3:if(bH===null)bL=-1;else if(bI===null)bL=1;else if("CompareTo"in bH)bL=bH.CompareTo(bI);else if("CompareTo0"in bH)bL=bH.CompareTo0(bI);else if(bH instanceof a.Array&&bI instanceof a.Array)bL=j.compareArrays(bH,bI);else if(bH instanceof a.Date&&bI instanceof a.Date)bL=j.compareDates(bH,bI);else{bM=[0];for(var bP in bH)if(function(bQ){return!bH.hasOwnProperty(bQ)?false:!bI.hasOwnProperty(bQ)?(bM[0]=1,true):(bM[0]=j.Compare(bH[bQ],bI[bQ]),bM[0]!==0);}(bP))break;if(bM[0]===0){for(var bQ in bI)if(function(bR){return!bI.hasOwnProperty(bR)?false:!bH.hasOwnProperty(bR)&&(bM[0]=-1,true);}(bQ))break;}bL=bM[0];}return bL;break;}}};j.compareArrays=function(bH,bI){var bJ,bK;if(p.length(bH)<p.length(bI))return -1;else if(p.length(bH)>p.length(bI))return 1;else{bJ=0;bK=0;while(bJ===0&&bK<p.length(bH)){bJ=j.Compare(p.get(bH,bK),p.get(bI,bK));bK=bK+1;}return bJ;}};j.compareDates=function(bH,bI){return j.Compare(bH.getTime(),bI.getTime());};l.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bH){var bI,bJ;bI=bD.random()*16|0;bJ=bH=="x"?bI:bI&3|8;return bJ.toString(16);});};n=m.T=bC.Class({GetEnumerator:function(){return new L.New(this,null,function(bH){var bI;bI=bH.s;return bI.$==0?false:(bH.c=bI.$0,bH.s=bI.$1,true);},void 0);},GetEnumerator0:function(){return J.Get(this);}},null,n);n.Empty=new n({$:0});o.Increment={$:0};o.Decrement={$:1};p.get=function(bH,bI){p.checkBounds(bH,bI);return bH[bI];};p.length=function(bH){return bH.dims===2?bH.length*bH.length:bH.length;};p.checkBounds=function(bH,bI){if(bI<0||bI>=bH.length)i.FailWith("Index was outside the bounds of the array.");};p.set=function(bH,bI,bJ){p.checkBounds(bH,bI);bH[bI]=bJ;};t.CompleteHoles=function(bH,bI,bJ){var bL,bM,bN,bO,bP,bQ;function bK(bR,bS){var bT,bU,bV,bW;return bM.Contains(bR)?null:(bT=bS===0?(bU=g.Create$1(""),[{$:7,$0:bR,$1:bU},bU]):bS===1?(bV=g.Create$1(0),[{$:12,$0:bR,$1:bV},bV]):bS===2?(bW=g.Create$1(false),[{$:8,$0:bR,$1:bW},bW]):i.FailWith("Invalid value type"),(bL.set_Item(bR,bT[1]),{$:1,$0:bT[0]}));}bL=new A.New$5();bM=new B.New$3();bN=J.Get(bI);try{while(bN.MoveNext()){bO=bN.Current();(bO.$==7?(bP=[bO.$0,C.Box(bO.$1)],true):bO.$==10?(bP=[bO.$0,C.Box(bO.$1)],true):bO.$==9?(bP=[bO.$0,C.Box(bO.$1)],true):bO.$==12?(bP=[bO.$0,C.Box(bO.$1)],true):bO.$==11?(bP=[bO.$0,C.Box(bO.$1)],true):bO.$==8&&(bP=[bO.$0,C.Box(bO.$1)],true))?(bQ=bP[0],bM.Add(bQ),bL.set_Item(bQ,bP[1])):void 0;}}finally{if("Dispose"in bN)bN.Dispose();}return[D.append(bI,p.choose(function(bR){return bK(bR[0],bR[1]);},bJ)),{$:0,$0:bL}];};u.Map=function(bH,bI){return u.CreateLazy(function(){return y.Map(bH,bI());});};u.CreateLazy=function(bH){var bI;bI={c:null,o:bH};return function(){var bJ,bK;bJ=bI.c;return bJ===null?(bJ=bI.o(),bI.c=bJ,(bK=bJ.s,bK!=null&&bK.$==0)?bI.o=null:y.WhenObsoleteRun(bJ,function(){bI.c=null;}),bJ):bJ;};};u.Sink=function(bH,bI){function bJ(){y.WhenRun(bI(),bH,function(){bf.scheduler().Fork(bJ);});}bf.scheduler().Fork(bJ);};u.Map3=function(bH,bI,bJ,bK){return u.CreateLazy(function(){return y.Map3(bH,bI(),bJ(),bK());});};u.Sequence=function(bH){return u.CreateLazy(function(){return y.Sequence(D.map(function(bI){return bI();},bH));});};u.Map2=function(bH,bI,bJ){return u.CreateLazy(function(){return y.Map2(bH,bI(),bJ());});};u.Const=function(bH){var bI;bI=y.New({$:0,$0:bH});return function(){return bI;};};u.Map2Unit=function(bH,bI){return u.CreateLazy(function(){return y.Map2Unit(bH(),bI());});};v.RunTemplate=function(bH){return M.RunFullDocTemplate(bH);};w=s.TemplateInstance=bC.Class({},h,w);w.New=bC.Ctor(function(bH,bI){this.doc=bI;this.allVars=bH.$==0?bH.$0:i.FailWith("Should not happen");},w);x=f.ConcreteVar=bC.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(bH){if(this.isConst)(function(bI){return bI("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bI){bE.log(bI);}));else{y.Obsolete(this.snap);this.current=bH;this.snap=y.New({$:2,$0:bH,$1:[]});}},UpdateMaybe:function(bH){var bI;bI=bH(this.Get());bI!=null&&bI.$==1?this.Set(bI.$0):void 0;}},g,x);x.New=bC.Ctor(function(bH,bI,bJ){var bK;bK=this;g.New.call(this);this.isConst=bH;this.current=bJ;this.snap=bI;this.view=function(){return bK.snap;};this.id=F.Int();},x);y.Map=function(bH,bI){var bJ,bK;bJ=bI.s;return bJ!=null&&bJ.$==0?y.New({$:0,$0:bH(bJ.$0)}):(bK=y.New({$:3,$0:[],$1:[]}),(y.When(bI,function(bL){y.MarkDone(bK,bI,bH(bL));},bK),bK));};y.WhenObsoleteRun=function(bH,bI){var bJ;bJ=bH.s;bJ==null?bI():bJ!=null&&bJ.$==2?bJ.$1.push(bI):bJ!=null&&bJ.$==3?bJ.$1.push(bI):void 0;};y.When=function(bH,bI,bJ){var bK;bK=bH.s;bK==null?y.Obsolete(bJ):bK!=null&&bK.$==2?(y.EnqueueSafe(bK.$1,bJ),bI(bK.$0)):bK!=null&&bK.$==3?(bK.$0.push(bI),y.EnqueueSafe(bK.$1,bJ)):bI(bK.$0);};y.MarkDone=function(bH,bI,bJ){var bK;if(bK=bI.s,bK!=null&&bK.$==0)y.MarkForever(bH,bJ);else y.MarkReady(bH,bJ);};y.EnqueueSafe=function(bH,bI){var bJ,bK,bL,bM;bH.push(bI);if(bH.length%20===0){bJ=bH.slice(0);_1.Clear(bH);for(bK=0,bL=p.length(bJ)-1;bK<=bL;bK++){bM=p.get(bJ,bK);typeof bM=="object"?function(bN){if(bN.s)bH.push(bN);}(bM):function(bN){bH.push(bN);}(bM);}}else void 0;};y.MarkForever=function(bH,bI){var bJ,bK,bL,bM;bJ=bH.s;if(bJ!=null&&bJ.$==3){bH.s={$:0,$0:bI};bK=bJ.$0;for(bL=0,bM=p.length(bK)-1;bL<=bM;bL++)(p.get(bK,bL))(bI);}else void 0;};y.MarkReady=function(bH,bI){var bJ,bK,bL,bM;bJ=bH.s;if(bJ!=null&&bJ.$==3){bH.s={$:2,$0:bI,$1:bJ.$1};bK=bJ.$0;for(bL=0,bM=p.length(bK)-1;bL<=bM;bL++)(p.get(bK,bL))(bI);}else void 0;};y.WhenRun=function(bH,bI,bJ){var bK;bK=bH.s;bK==null?bJ():bK!=null&&bK.$==2?(bK.$1.push(bJ),bI(bK.$0)):bK!=null&&bK.$==3?(bK.$0.push(bI),bK.$1.push(bJ)):bI(bK.$0);};y.Map3=function(bH,bI,bJ,bK){var bL,bM,bN,bO;function bP(bQ){var bR,bS,bT,bU;if(!(bR=bO.s,bR!=null&&bR.$==0||bR!=null&&bR.$==2)){bS=y.ValueAndForever(bI);bT=y.ValueAndForever(bJ);bU=y.ValueAndForever(bK);bS!=null&&bS.$==1?bT!=null&&bT.$==1?bU!=null&&bU.$==1?bS.$0[1]&&bT.$0[1]&&bU.$0[1]?y.MarkForever(bO,bH(bS.$0[0],bT.$0[0],bU.$0[0])):y.MarkReady(bO,bH(bS.$0[0],bT.$0[0],bU.$0[0])):void 0:void 0:void 0;}}bL=bI.s;bM=bJ.s;bN=bK.s;return bL!=null&&bL.$==0?bM!=null&&bM.$==0?bN!=null&&bN.$==0?y.New({$:0,$0:bH(bL.$0,bM.$0,bN.$0)}):y.Map3Opt1(bH,bL.$0,bM.$0,bK):bN!=null&&bN.$==0?y.Map3Opt2(bH,bL.$0,bN.$0,bJ):y.Map3Opt3(bH,bL.$0,bJ,bK):bM!=null&&bM.$==0?bN!=null&&bN.$==0?y.Map3Opt4(bH,bM.$0,bN.$0,bI):y.Map3Opt5(bH,bM.$0,bI,bK):bN!=null&&bN.$==0?y.Map3Opt6(bH,bN.$0,bI,bJ):(bO=y.New({$:3,$0:[],$1:[]}),(y.When(bI,bP,bO),y.When(bJ,bP,bO),y.When(bK,bP,bO),bO));};y.Sequence=function(bH){var bI,bJ,bK;function bL(bM){var bN;if(bK[0]===0){bN=p.map(function(bO){var bP;bP=bO.s;return bP!=null&&bP.$==0?bP.$0:bP!=null&&bP.$==2?bP.$0:i.FailWith("value not found by View.Sequence");},bI);p.forall(function(bO){var bP;bP=bO.s;return bP!=null&&bP.$==0;},bI)?y.MarkForever(bJ,bN):y.MarkReady(bJ,bN);}else bK[0]--;}bI=p.ofSeq(bH);return bI.length==0?y.New({$:0,$0:[]}):(bJ=y.New({$:3,$0:[],$1:[]}),(bK=[p.length(bI)-1],(p.iter(function(bM){y.When(bM,bL,bJ);},bI),bJ)));};y.Map2=function(bH,bI,bJ){var bK,bL,bM;function bN(bO){var bP,bQ,bR;if(!(bP=bM.s,bP!=null&&bP.$==0||bP!=null&&bP.$==2)){bQ=y.ValueAndForever(bI);bR=y.ValueAndForever(bJ);bQ!=null&&bQ.$==1?bR!=null&&bR.$==1?bQ.$0[1]&&bR.$0[1]?y.MarkForever(bM,bH(bQ.$0[0],bR.$0[0])):y.MarkReady(bM,bH(bQ.$0[0],bR.$0[0])):void 0:void 0;}}bK=bI.s;bL=bJ.s;return bK!=null&&bK.$==0?bL!=null&&bL.$==0?y.New({$:0,$0:bH(bK.$0,bL.$0)}):y.Map2Opt1(bH,bK.$0,bJ):bL!=null&&bL.$==0?y.Map2Opt2(bH,bL.$0,bI):(bM=y.New({$:3,$0:[],$1:[]}),(y.When(bI,bN,bM),y.When(bJ,bN,bM),bM));};y.Map2Unit=function(bH,bI){var bJ,bK,bL;function bM(){var bN,bO,bP;if(!(bN=bL.s,bN!=null&&bN.$==0||bN!=null&&bN.$==2)){bO=y.ValueAndForever(bH);bP=y.ValueAndForever(bI);bO!=null&&bO.$==1?bP!=null&&bP.$==1?bO.$0[1]&&bP.$0[1]?y.MarkForever(bL,null):y.MarkReady(bL,null):void 0:void 0;}}bJ=bH.s;bK=bI.s;return bJ!=null&&bJ.$==0?bK!=null&&bK.$==0?y.New({$:0,$0:null}):bI:bK!=null&&bK.$==0?bH:(bL=y.New({$:3,$0:[],$1:[]}),(y.When(bH,bM,bL),y.When(bI,bM,bL),bL));};y.Copy=function(bH){var bI,bJ,bK;bI=bH.s;return bI==null?bH:bI!=null&&bI.$==2?(bJ=y.New({$:2,$0:bI.$0,$1:[]}),(y.WhenObsolete(bH,bJ),bJ)):bI!=null&&bI.$==3?(bK=y.New({$:3,$0:[],$1:[]}),(y.When(bH,function(bL){y.MarkDone(bK,bH,bL);},bK),bK)):bH;};y.Map3Opt1=function(bH,bI,bJ,bK){return y.Map(function(bL){return bH(bI,bJ,bL);},bK);};y.Map3Opt2=function(bH,bI,bJ,bK){return y.Map(function(bL){return bH(bI,bL,bJ);},bK);};y.Map3Opt3=function(bH,bI,bJ,bK){return y.Map2(function(bL,bM){return bH(bI,bL,bM);},bJ,bK);};y.Map3Opt4=function(bH,bI,bJ,bK){return y.Map(function(bL){return bH(bL,bI,bJ);},bK);};y.Map3Opt5=function(bH,bI,bJ,bK){return y.Map2(function(bL,bM){return bH(bL,bI,bM);},bJ,bK);};y.Map3Opt6=function(bH,bI,bJ,bK){return y.Map2(function(bL,bM){return bH(bL,bM,bI);},bJ,bK);};y.ValueAndForever=function(bH){var bI;bI=bH.s;return bI!=null&&bI.$==0?{$:1,$0:[bI.$0,true]}:bI!=null&&bI.$==2?{$:1,$0:[bI.$0,false]}:null;};y.Map2Opt1=function(bH,bI,bJ){return y.Map(function(bK){return bH(bI,bK);},bJ);};y.Map2Opt2=function(bH,bI,bJ){return y.Map(function(bK){return bH(bK,bI);},bJ);};y.WhenObsolete=function(bH,bI){var bJ;bJ=bH.s;bJ==null?y.Obsolete(bI):bJ!=null&&bJ.$==2?y.EnqueueSafe(bJ.$1,bI):bJ!=null&&bJ.$==3?y.EnqueueSafe(bJ.$1,bI):void 0;};A=z.Dictionary=bC.Class({set_Item:function(bH,bI){this.set(bH,bI);},set:function(bH,bI){var bJ,bK,bL,bM;bJ=this;bK=this.hash(bH);bL=this.data[bK];bL?(bM=p.tryFindIndex(function(bN){return bJ.equals.apply(null,[(i.KeyValue(bN))[0],bH]);},bL),bM==null?(this.count=this.count+1,bL.push({K:bH,V:bI})):bL[bM.$0]={K:bH,V:bI}):(this.count=this.count+1,this.data[bK]=new a.Array({K:bH,V:bI}));},TryGetValue:function(bH,bI){var bJ,bK,bL;bJ=this;bK=this.data[this.hash(bH)];return bK&&(bL=p.tryPick(function(bM){var bN;bN=i.KeyValue(bM);return bJ.equals.apply(null,[bN[0],bH])?{$:1,$0:bN[1]}:null;},bK),bL!=null&&bL.$==1&&(bI.set(bL.$0),true));},ContainsKey:function(bH){var bI,bJ;bI=this;bJ=this.data[this.hash(bH)];return bJ&&p.exists(function(bK){return bI.equals.apply(null,[(i.KeyValue(bK))[0],bH]);},bJ);},get_Item:function(bH){return this.get(bH);},get:function(bH){var bI,bJ;bI=this;bJ=this.data[this.hash(bH)];return bJ?p.pick(function(bK){var bL;bL=i.KeyValue(bK);return bI.equals.apply(null,[bL[0],bH])?{$:1,$0:bL[1]}:null;},bJ):I.notPresent();},GetEnumerator:function(){return J.Get0(this);},GetEnumerator0:function(){return J.Get0(p.concat(O.GetFieldValues(this.data)));}},h,A);A.New$5=bC.Ctor(function(){A.New$6.call(this,[],j.Equals,j.Hash);},A);A.New$6=bC.Ctor(function(bH,bI,bJ){var bK,bL;this.equals=bI;this.hash=bJ;this.count=0;this.data=[];bK=J.Get(bH);try{while(bK.MoveNext()){bL=bK.Current();this.set(bL.K,bL.V);}}finally{if("Dispose"in bK)bK.Dispose();}},A);B=z.HashSet=bC.Class({Add:function(bH){return this.add(bH);},Contains:function(bH){var bI;bI=this.data[this.hash(bH)];return bI==null?false:this.arrContains(bH,bI);},add:function(bH){var bI,bJ;bI=this.hash(bH);bJ=this.data[bI];return bJ==null?(this.data[bI]=[bH],this.count=this.count+1,true):this.arrContains(bH,bJ)?false:(bJ.push(bH),this.count=this.count+1,true);},arrContains:function(bH,bI){var bJ,bK,bL,bM;bJ=true;bK=0;bM=bI.length;while(bJ&&bK<bM)if(this.equals.apply(null,[bI[bK],bH]))bJ=false;else bK=bK+1;return!bJ;},IntersectWith:function(bH){var bI,bJ,bK,bL,bM;bI=new B.New$4(bH,this.equals,this.hash);bJ=_0.concat(this.data);for(bK=0,bL=bJ.length-1;bK<=bL;bK++){bM=bJ[bK];!bI.Contains(bM)?this.Remove(bM):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bH){var bI,bJ,bK,bL;bI=0;bJ=_0.concat(this.data);for(bK=0,bL=bJ.length-1;bK<=bL;bK++)p.set(bH,bK,bJ[bK]);},ExceptWith:function(bH){var bI;bI=J.Get(bH);try{while(bI.MoveNext())this.Remove(bI.Current());}finally{if("Dispose"in bI)bI.Dispose();}},Remove:function(bH){var bI;bI=this.data[this.hash(bH)];return bI==null?false:this.arrRemove(bH,bI)&&(this.count=this.count-1,true);},arrRemove:function(bH,bI){var bJ,bK,bL,bM;bJ=true;bK=0;bM=bI.length;while(bJ&&bK<bM)if(this.equals.apply(null,[bI[bK],bH])){bI.splice.apply(bI,[bK,1]);bJ=false;}else bK=bK+1;return!bJ;},GetEnumerator:function(){return J.Get(_0.concat(this.data));},GetEnumerator0:function(){return J.Get(_0.concat(this.data));}},h,B);B.New$3=bC.Ctor(function(){B.New$4.call(this,[],j.Equals,j.Hash);},B);B.New$4=bC.Ctor(function(bH,bI,bJ){var bK;this.equals=bI;this.hash=bJ;this.data=[];this.count=0;bK=J.Get(bH);try{while(bK.MoveNext())this.add(bK.Current());}finally{if("Dispose"in bK)bK.Dispose();}},B);B.New$2=bC.Ctor(function(bH){B.New$4.call(this,bH,j.Equals,j.Hash);},B);C.Box=a.id;p.choose=function(bH,bI){var bJ,bK,bL,bM;bJ=[];for(bK=0,bL=bI.length-1;bK<=bL;bK++){bM=bH(bI[bK]);bM==null?void 0:bJ.push(bM.$0);}return bJ;};p.tryFindIndex=function(bH,bI){var bJ,bK;bJ=null;bK=0;while(bK<bI.length&&bJ==null){bH(bI[bK])?bJ={$:1,$0:bK}:void 0;bK=bK+1;}return bJ;};p.iter=function(bH,bI){var bJ,bK;for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)bH(bI[bJ]);};p.map=function(bH,bI){var bJ,bK,bL;bJ=new a.Array(bI.length);for(bK=0,bL=bI.length-1;bK<=bL;bK++)bJ[bK]=bH(bI[bK]);return bJ;};p.filter=function(bH,bI){var bJ,bK,bL;bJ=[];for(bK=0,bL=bI.length-1;bK<=bL;bK++)if(bH(bI[bK]))bJ.push(bI[bK]);return bJ;};p.concat=function(bH){return a.Array.prototype.concat.apply([],p.ofSeq(bH));};p.tryPick=function(bH,bI){var bJ,bK,bL;bJ=null;bK=0;while(bK<bI.length&&bJ==null){bL=bH(bI[bK]);bL!=null&&bL.$==1?bJ=bL:void 0;bK=bK+1;}return bJ;};p.exists=function(bH,bI){var bJ,bK,bL,bM;bJ=false;bK=0;bM=p.length(bI);while(!bJ&&bK<bM)if(bH(bI[bK]))bJ=true;else bK=bK+1;return bJ;};p.foldBack=function(bH,bI,bJ){var bK,bL,bM,bN,bO;bK=bJ;bM=bI.length;for(bN=1,bO=bM;bN<=bO;bN++)bK=bH(bI[bM-bN],bK);return bK;};p.ofSeq=function(bH){var bI,bJ;if(bH instanceof a.Array)return bH.slice();else if(bH instanceof n)return p.ofList(bH);else{bI=[];bJ=J.Get(bH);try{while(bJ.MoveNext())bI.push(bJ.Current());return bI;}finally{if("Dispose"in bJ)bJ.Dispose();}}};p.pick=function(bH,bI){var bJ;bJ=p.tryPick(bH,bI);return bJ==null?i.FailWith("KeyNotFoundException"):bJ.$0;};p.ofList=function(bH){var bI,bJ;bJ=[];bI=bH;while(!(bI.$==0)){bJ.push(m.head(bI));bI=m.tail(bI);}return bJ;};p.forall=function(bH,bI){var bJ,bK,bL,bM;bJ=true;bK=0;bM=p.length(bI);while(bJ&&bK<bM)if(bH(bI[bK]))bK=bK+1;else bJ=false;return bJ;};p.create=function(bH,bI){var bJ,bK,bL;bJ=new a.Array(bH);for(bK=0,bL=bH-1;bK<=bL;bK++)bJ[bK]=bI;return bJ;};p.init=function(bH,bI){var bJ,bK,bL;bH<0?i.FailWith("Negative size given."):null;bJ=new a.Array(bH);for(bK=0,bL=bH-1;bK<=bL;bK++)bJ[bK]=bI(bK);return bJ;};D.append=function(bH,bI){return{GetEnumerator:function(){var bJ,bK;bJ=J.Get(bH);bK=[true];return new L.New(bJ,null,function(bL){var bM;return bL.s.MoveNext()?(bL.c=bL.s.Current(),true):(bM=bL.s,!j.Equals(bM,null)?bM.Dispose():void 0,bL.s=null,bK[0]&&(bK[0]=false,bL.s=J.Get(bI),bL.s.MoveNext()?(bL.c=bL.s.Current(),true):(bL.s.Dispose(),bL.s=null,false)));},function(bL){var bM;bM=bL.s;!j.Equals(bM,null)?bM.Dispose():void 0;});}};};D.fold=function(bH,bI,bJ){var bK,bL;bK=bI;bL=J.Get(bJ);try{while(bL.MoveNext())bK=bH(bK,bL.Current());return bK;}finally{if("Dispose"in bL)bL.Dispose();}};D.iter=function(bH,bI){var bJ;bJ=J.Get(bI);try{while(bJ.MoveNext())bH(bJ.Current());}finally{if("Dispose"in bJ)bJ.Dispose();}};D.map=function(bH,bI){return{GetEnumerator:function(){var bJ;bJ=J.Get(bI);return new L.New(null,null,function(bK){return bJ.MoveNext()&&(bK.c=bH(bJ.Current()),true);},function(){bJ.Dispose();});}};};D.forall=function(bH,bI){return!D.exists(function(bJ){return!bH(bJ);},bI);};D.max=function(bH){var bI,bJ,bK;bI=J.Get(bH);try{if(!bI.MoveNext())D.seqEmpty();bJ=bI.Current();while(bI.MoveNext()){bK=bI.Current();j.Compare(bK,bJ)===1?bJ=bK:void 0;}return bJ;}finally{if("Dispose"in bI)bI.Dispose();}};D.exists=function(bH,bI){var bJ,bK;bJ=J.Get(bI);try{bK=false;while(!bK&&bJ.MoveNext())bK=bH(bJ.Current());return bK;}finally{if("Dispose"in bJ)bJ.Dispose();}};D.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};F.Int=function(){F.set_counter(F.counter()+1);return F.counter();};F.set_counter=function(bH){S.$cctor();S.counter=bH;};F.counter=function(){S.$cctor();return S.counter;};H.NewFromSeq=function(bH){var bI,bJ,bK;bI={};bJ=J.Get(bH);try{while(bJ.MoveNext()){bK=bJ.Current();bI[bK[0]]=bK[1];}}finally{if("Dispose"in bJ)bJ.Dispose();}return bI;};y.Obsolete=function(bH){var bI,bJ,bK,bL,bM;bJ=bH.s;if(bJ==null||(bJ!=null&&bJ.$==2?(bI=bJ.$1,false):bJ!=null&&bJ.$==3?(bI=bJ.$1,false):true))void 0;else{bH.s=null;for(bK=0,bL=p.length(bI)-1;bK<=bL;bK++){bM=p.get(bI,bK);typeof bM=="object"?function(bN){y.Obsolete(bN);}(bM):bM();}}};y.New=function(bH){return{s:bH};};I.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};J.Get=function(bH){return bH instanceof a.Array?J.ArrayEnumerator(bH):j.Equals(typeof bH,"string")?J.StringEnumerator(bH):bH.GetEnumerator();};J.ArrayEnumerator=function(bH){return new L.New(0,null,function(bI){var bJ;bJ=bI.s;return bJ<p.length(bH)&&(bI.c=p.get(bH,bJ),bI.s=bJ+1,true);},void 0);};J.StringEnumerator=function(bH){return new L.New(0,null,function(bI){var bJ;bJ=bI.s;return bJ<bH.length&&(bI.c=bH[bJ],bI.s=bJ+1,true);},void 0);};J.Get0=function(bH){return bH instanceof a.Array?J.ArrayEnumerator(bH):j.Equals(typeof bH,"string")?J.StringEnumerator(bH):"GetEnumerator0"in bH?bH.GetEnumerator0():bH.GetEnumerator();};L=J.T=bC.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},h,L);L.New=bC.Ctor(function(bH,bI,bJ,bK){this.s=bH;this.c=bI;this.n=bJ;this.d=bK;},L);M=f.Doc=bC.Class({},h,M);M.RunFullDocTemplate=function(bH){var bI,bJ;M.PrepareTemplateStrict("",null,P.ChildrenArray(a.document.body),{$:1,$0:a.document.body});bI=M.ChildrenTemplate(a.document.body,bH);bJ=a.document.body;(function(bK){M.RunInPlace(bJ,bK);}(bI));return bI;};M.PrepareTemplateStrict=function(bH,bI,bJ,bK){var bL,bM;function bN(bZ){var b1,b2,b3,b4,b5,b6,b7,b8;function b0(b9){var b_;b_=bZ.getAttribute(b9);b_===null?void 0:bZ.setAttribute(b9,b_.toLowerCase());}b1=bZ.attributes;b2=[];b3=[];b4=[];for(b5=0,b6=b1.length-1;b5<=b6;b5++){b7=b1.item(b5);V.StartsWith(b7.nodeName,"ws-on")&&b7.nodeName!=="ws-onafterrender"&&b7.nodeName!=="ws-on"?(b2.push(b7.nodeName),b3.push(T.string(b7.nodeName,{$:1,$0:"ws-on".length},null)+":"+b7.nodeValue.toLowerCase())):!V.StartsWith(b7.nodeName,"ws-")&&(new a.RegExp(U.TextHoleRE())).test(b7.nodeValue)?(b7.nodeValue=(b8=new a.RegExp(U.TextHoleRE(),"g"),b7.nodeValue.replace(b8,function(b9,b_){return"${"+b_.toLowerCase()+"}";})),b4.push(b7.nodeName)):void 0;}!(b3.length==0)?bZ.setAttribute("ws-on",V.concat(" ",b3)):void 0;!(b4.length==0)?bZ.setAttribute("ws-attr-holes",V.concat(" ",b4)):void 0;b0("ws-hole");b0("ws-replace");b0("ws-attr");b0("ws-onafterrender");b0("ws-var");p.iter(function(b9){bZ.removeAttribute(b9);},b2);}function bO(bZ){var b0,b1,b2,b3,b4,b5;b0=null;b1=0;b3=bZ.textContent;b4=new a.RegExp(U.TextHoleRE(),"g");while(b0=b4.exec(b3),b0!==null){bZ.parentNode.insertBefore(a.document.createTextNode(T.string(b3,{$:1,$0:b1},{$:1,$0:b4.lastIndex-p.get(b0,0).length-1})),bZ);b1=b4.lastIndex;b5=a.document.createElement("span");b5.setAttribute("ws-replace",p.get(b0,1).toLowerCase());bZ.parentNode.insertBefore(b5,bZ);}b4.lastIndex=0;bZ.textContent=T.string(b3,{$:1,$0:b1},null);}function bP(bZ,b0){function b1(b2){P.IterSelector(bZ,"["+b2+"]",function(b3){var b4,b5;b4=(b5=null,[b0.TryGetValue(b3.getAttribute(b2).toLowerCase(),{get:function(){return b5;},set:function(b6){b5=b6;}}),b5]);b4[0]?b3.setAttribute(b2,b4[1]):void 0;});}b1("ws-hole");b1("ws-replace");b1("ws-attr");b1("ws-onafterrender");b1("ws-var");P.IterSelector(bZ,"[ws-on]",function(b2){b2.setAttribute("ws-on",V.concat(" ",p.map(function(b3){var b4,b5,b6;b4=V.SplitChars(b3,[":"],1);b5=(b6=null,[b0.TryGetValue(p.get(b4,1),{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]);return b5[0]?p.get(b4,0)+":"+b5[1]:b3;},V.SplitChars(b2.getAttribute("ws-on"),[" "],1))));});return P.IterSelector(bZ,"[ws-attr-holes]",function(b2){var b3,b4,b5;b3=V.SplitChars(b2.getAttribute("ws-attr-holes"),[" "],1);for(b4=0,b5=b3.length-1;b4<=b5;b4++)(function(){var b6;function b7(b8,b9){var b_;b_=i.KeyValue(b9);return b8.replace(new a.RegExp("\\${"+b_[0]+"}","ig"),"${"+b_[1]+"}");}b6=p.get(b3,b4);return b2.setAttribute(b6,(((bC.Curried3(D.fold))(b7))(b2.getAttribute(b6)))(b0));}());});}function bQ(bZ,b0){var b1,b2,b3,b4,b5;bN(b0);b1=b0.nodeName.toLowerCase();b2=bZ.querySelector("[ws-attr="+b1+"]");if(j.Equals(b2,null))return bE.warn("Filling non-existent attr hole",b1);else{b2.removeAttribute("ws-attr");for(b3=0,b4=b0.attributes.length-1;b3<=b4;b3++){b5=b0.attributes.item(b3);b5.name==="class"&&b2.hasAttribute("class")?b2.setAttribute("class",b2.getAttribute("class")+" "+b5.nodeValue):b2.setAttribute(b5.name,b5.nodeValue);}return;}}function bR(bZ,b0){function b1(b2){P.IterSelector(bZ,"["+b2+"]",function(b3){if(!b0.Contains(b3.getAttribute(b2)))b3.removeAttribute(b2);});}b1("ws-attr");b1("ws-onafterrender");b1("ws-var");P.IterSelector(bZ,"[ws-hole]",function(b2){if(!b0.Contains(b2.getAttribute("ws-hole"))){b2.removeAttribute("ws-hole");while(b2.hasChildNodes())b2.removeChild(b2.lastChild);}});P.IterSelector(bZ,"[ws-replace]",function(b2){if(!b0.Contains(b2.getAttribute("ws-replace")))b2.parentNode.removeChild(b2);});P.IterSelector(bZ,"[ws-on]",function(b2){b2.setAttribute("ws-on",V.concat(" ",p.filter(function(b3){return b0.Contains(p.get(V.SplitChars(b3,[":"],1),1));},V.SplitChars(b2.getAttribute("ws-on"),[" "],1))));});return P.IterSelector(bZ,"[ws-attr-holes]",function(b2){var b3,b4,b5,b6,b7;b3=V.SplitChars(b2.getAttribute("ws-attr-holes"),[" "],1);for(b4=0,b5=b3.length-1;b4<=b5;b4++){b6=p.get(b3,b4);b2.setAttribute(b6,(b7=new a.RegExp(U.TextHoleRE(),"g"),b2.getAttribute(b6).replace(b7,function(b8,b9){return b0.Contains(b9)?b8:"";})));}});}function bS(bZ,b0){var b1;b1=bZ.querySelector("[ws-replace]");return j.Equals(b1,null)?(bE.warn("Filling non-existent text hole",bI),null):(b1.parentNode.replaceChild(new a.Text(b0),b1),{$:1,$0:b1.getAttribute("ws-replace")});}function bT(bZ,b0,b1){while(true)if(bZ.hasChildNodes())b1=b0.insertBefore(bZ.lastChild,b1);else return null;}function bU(bZ,b0,b1){var b2,b3,b4,b5,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq;function b6(cr){}while(true)switch(bZ){case 0:b7=T.string(b0.nodeName,{$:1,$0:3},null).toLowerCase();b8=(b2=b7.indexOf("."),b2===-1?[bH,b7]:[T.string(b7,null,{$:1,$0:b2-1}),T.string(b7,{$:1,$0:b2+1},null)]);b9=b8[1];b_=b8[0];if(!U.LoadedTemplates().ContainsKey(b_))return bE.warn("Instantiating non-loaded template",b9);else{b$=U.LoadedTemplates().get_Item(b_);if(!b$.ContainsKey(b9))return bE.warn("Instantiating non-loaded template",b9);else{ca=b$.get_Item(b9);cb=ca.cloneNode(true);cc=new B.New$3();cd=new A.New$5();ce=b0.attributes;for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=ce.item(cf).name.toLowerCase();cd.set_Item(ch,(ci=ce.item(cf).nodeValue,ci===""?ch:ci.toLowerCase()));!cc.Add(ch)?bE.warn("Hole mapped twice",ch):void 0;}for(cj=0,ck=b0.childNodes.length-1;cj<=ck;cj++){cl=b0.childNodes[cj];j.Equals(cl.nodeType,R.ELEMENT_NODE)?!cc.Add(cl.nodeName.toLowerCase())?bE.warn("Hole filled twice",b9):void 0:void 0;}cm=b0.childNodes.length===1&&j.Equals(b0.firstChild.nodeType,R.TEXT_NODE);if(cm){b4=bS(cb,b0.firstChild.textContent);((function(cr){return function(cs){if(cs!=null)cr(cs.$0);};}((b5=function(cr){return function(cs){return cr.Add(cs);};}(cc),function(cr){return b6(b5(cr));})))(b4));}bR(cb,cc);if(!cm){for(cn=0,co=b0.childNodes.length-1;cn<=co;cn++){cp=b0.childNodes[cn];j.Equals(cp.nodeType,R.ELEMENT_NODE)?cp.hasAttributes()?bQ(cb,cp):bV(cb,cp):void 0;}}bP(cb,cd);(((function(cr){function cs(ct,cu){return bT(cr,ct,cu);}return function(ct){return function(cu){return cs(ct,cu);};};}(cb))(b0.parentNode))(b0));b0.parentNode.removeChild(b0);return;}}break;case 1:if(b1!==null){cq=b1.nextSibling;if(j.Equals(b1.nodeType,R.TEXT_NODE))bO(b1);else if(j.Equals(b1.nodeType,R.ELEMENT_NODE))bX(b1);b1=cq;}else return null;break;}}function bV(bZ,b0){var b1,b3,b4;function b2(b5,b6){var b7,b8,b9;if(b3==="title"&&b0.hasChildNodes()){b7=bF.parseHTML(b0.textContent);b0.removeChild(b0.firstChild);for(b8=0,b9=b7.length-1;b8<=b9;b8++)b0.appendChild(p.get(b7,b8));}else null;bX(b0);return bT(b0,b5,b6);}b3=b0.nodeName.toLowerCase();P.IterSelector(bZ,"[ws-attr-holes]",function(b5){var b6,b7,b8,b9,b_;b6=V.SplitChars(b5.getAttribute("ws-attr-holes"),[" "],1);for(b7=0,b8=b6.length-1;b7<=b8;b7++){b9=p.get(b6,b7);b5.setAttribute(b9,(b_=new a.RegExp("\\${"+b3+"}","ig"),b5.getAttribute(b9).replace(b_,b0.textContent)));}});b4=bZ.querySelector("[ws-hole="+b3+"]");if(j.Equals(b4,null)){b1=bZ.querySelector("[ws-replace="+b3+"]");return j.Equals(b1,null)?null:(b2(b1.parentNode,b1),void b1.parentNode.removeChild(b1));}else{while(b4.hasChildNodes())b4.removeChild(b4.lastChild);b4.removeAttribute("ws-hole");return b2(b4,null);}}function bW(bZ){return bU(0,bZ);}function bX(bZ){var b0,b1;if(V.StartsWith(bZ.nodeName.toLowerCase(),"ws-")&&!bZ.hasAttribute("ws-template"))bW(bZ);else{bN(bZ);b0=bZ.getAttribute("ws-template");if(b0===null){b1=bZ.getAttribute("ws-children-template");if(b1===null)bY(bZ,bZ.firstChild);else{bZ.removeAttribute("ws-children-template");M.PrepareTemplate(bH,{$:1,$0:b1},function(){return P.ChildrenArray(bZ);});while(bZ.hasChildNodes())bZ.removeChild(bZ.lastChild);}}else M.PrepareSingleTemplate(bH,{$:1,$0:b0},bZ);}}function bY(bZ,b0){return bU(1,bZ,b0);}bL=bK!=null&&bK.$==1?bK.$0:M.FakeRoot(bJ);bM=(bI==null?"":bI.$0).toLowerCase();U.LoadedTemplateFile(bH).set_Item(bM,bL);p.length(bJ)>0?bY(bL,p.get(bJ,0)):void 0;};M.ChildrenTemplate=function(bH,bI){var bJ,bK,bL,bM,bN;bJ=M.InlineTemplate(bH,bI);bK=bJ[1];bL=bJ[0];bM=bL.Els;return!j.Equals(bM,null)&&bM.length===1&&(p.get(bM,0)instanceof R&&(j.Equals(p.get(bM,0).nodeType,R.ELEMENT_NODE)&&(bN=p.get(bM,0),true)))?X.TreeNode(bL,bK):M.Mk({$:6,$0:bL},bK);};M.RunInPlace=function(bH,bI){var bJ;bJ=bI.docNode;u.Sink(Y.StartProcessor(U.PerformAnimatedUpdate(U.CreateRunState(bH,bJ),bJ)),bI.updates);};M.PrepareTemplate=function(bH,bI,bJ){var bK,bL,bM,bN,bO;if(!U.LoadedTemplateFile(bH).ContainsKey(bI==null?"":bI.$0)){bK=bJ();for(bL=0,bM=bK.length-1;bL<=bM;bL++){bN=p.get(bK,bL);bO=bN.parentNode;j.Equals(bO,null)?void 0:bO.removeChild(bN);}M.PrepareTemplateStrict(bH,bI,bK,null);}};M.PrepareSingleTemplate=function(bH,bI,bJ){var bK,bL,bM;bJ.removeAttribute("ws-template");bK=bJ.getAttribute("ws-replace");bK===null?void 0:(bJ.removeAttribute("ws-replace"),bL=bJ.parentNode,j.Equals(bL,null)?void 0:(bM=a.document.createElement(bJ.tagName),bM.setAttribute("ws-replace",bK),bL.replaceChild(bM,bJ)));M.PrepareTemplateStrict(bH,bI,[bJ],null);};M.FakeRoot=function(bH){var bI,bJ,bK;bI=a.document.createElement("div");for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++)bI.appendChild(p.get(bH,bJ));return bI;};M.InlineTemplate=function(bH,bI){var bJ,bK,bN,bO,bP,bQ,bR,bS,bT;function bL(bU,bV){var bW,bX,bY;bW=_3.Insert(bU,bV);bO.push(_3.Updates(bW));bP.push([bU,bW]);bX=bC.GetOptional(bW.OnAfterRender);return bX==null?null:(bY=bX.$0,void bQ.push(function(){bY(bU);}));}function bM(bU){var bV,bW;bV=(bW=null,[bR.TryGetValue(bU,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);return bV[0]?bV[1].$==0?{$:1,$0:bV[1].$1}:bV[1].$==1?{$:1,$0:M.TextNode(bV[1].$1)}:bV[1].$==2?{$:1,$0:M.TextView(bV[1].$1)}:bV[1].$==7?{$:1,$0:M.TextView(bV[1].$1.get_View())}:bV[1].$==8?{$:1,$0:M.TextView(u.Map(a.String,bV[1].$1.get_View()))}:bV[1].$==9?{$:1,$0:M.TextView(u.Map(function(bX){return bX.get_Input();},bV[1].$1.get_View()))}:bV[1].$==10?{$:1,$0:M.TextView(u.Map(a.String,bV[1].$1.get_View()))}:bV[1].$==11?{$:1,$0:M.TextView(u.Map(function(bX){return bX.get_Input();},bV[1].$1.get_View()))}:bV[1].$==12?{$:1,$0:M.TextView(u.Map(a.String,bV[1].$1.get_View()))}:(bE.warn("Content hole filled with attribute data",bU),null):null;}bN=[];bO=[];bP=[];bQ=[];bR=new A.New$5();bS=J.Get(bI);try{while(bS.MoveNext()){bT=bS.Current();bR.set_Item(bT.$0,bT);}}finally{if("Dispose"in bS)bS.Dispose();}bJ=P.ChildrenArray(bH);P.IterSelector(bH,"[ws-hole]",function(bU){var bV,bW,bX;bX=bU.getAttribute("ws-hole");bU.removeAttribute("ws-hole");while(bU.hasChildNodes())bU.removeChild(bU.lastChild);bV=bM(bX);bV!=null&&bV.$==1?(bW=bV.$0,U.LinkElement(bU,bW.docNode),bN.push(Z.New(_3.Empty(bU),bW.docNode,null,bU,F.Int(),null)),bO.push(bW.updates)):void 0;});P.IterSelector(bH,"[ws-replace]",function(bU){var bV,bW,bX,bY,bZ,b0;bV=bM(bU.getAttribute("ws-replace"));bV!=null&&bV.$==1?(bW=bV.$0,bX=bU.parentNode,bY=a.document.createTextNode(""),bX.replaceChild(bY,bU),bZ=U.InsertBeforeDelim(bY,bW.docNode),b0=p.tryFindIndex(function(b1){return bU===b1;},bJ),b0==null?void 0:p.set(bJ,b0.$0,bW.docNode),bN.push(Z.New(_3.Empty(bX),bW.docNode,{$:1,$0:[bZ,bY]},bX,F.Int(),null)),bO.push(bW.updates)):void 0;});P.IterSelector(bH,"[ws-attr]",function(bU){var bV,bW,bX;bV=bU.getAttribute("ws-attr");bU.removeAttribute("ws-attr");bW=(bX=null,[bR.TryGetValue(bV,{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);bW[0]?bW[1].$==3?bL(bU,bW[1].$1):bE.warn("Attribute hole filled with non-attribute data",bV):void 0;});P.IterSelector(bH,"[ws-on]",function(bU){bL(bU,_6.Concat(p.choose(function(bV){var bW,bX,bY;bW=V.SplitChars(bV,[":"],1);bX=(bY=null,[bR.TryGetValue(p.get(bW,1),{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);return bX[0]?bX[1].$==4?{$:1,$0:_5.Handler(p.get(bW,0),bX[1].$1)}:bX[1].$==5?{$:1,$0:_6.Handler(p.get(bW,0),bX[1].$2)}:(bE.warn("Event hole on"+p.get(bW,0)+" filled with non-event data",p.get(bW,1)),null):null;},V.SplitChars(bU.getAttribute("ws-on"),[" "],1))));bU.removeAttribute("ws-on");});P.IterSelector(bH,"[ws-onafterrender]",function(bU){var bV,bW,bX;bV=bU.getAttribute("ws-onafterrender");bW=(bX=null,[bR.TryGetValue(bV,{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);bW[0]?bW[1].$==6?(bU.removeAttribute("ws-onafterrender"),bL(bU,_5.OnAfterRender(bW[1].$1))):bE.warn("onafterrender hole filled with non-onafterrender data",bV):void 0;});P.IterSelector(bH,"[ws-var]",function(bU){var bV,bW,bX;bV=bU.getAttribute("ws-var");bU.removeAttribute("ws-var");bW=(bX=null,[bR.TryGetValue(bV,{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);bW[0]?bW[1].$==7?bL(bU,_5.Value(bW[1].$1)):bW[1].$==8?bL(bU,_5.Checked(bW[1].$1)):bW[1].$==9?bL(bU,_5.IntValue(bW[1].$1)):bW[1].$==10?bL(bU,_5.IntValueUnchecked(bW[1].$1)):bW[1].$==11?bL(bU,_5.FloatValue(bW[1].$1)):bW[1].$==12?bL(bU,_5.FloatValueUnchecked(bW[1].$1)):bE.warn("Var hole filled with non-Var data",bV):void 0;});P.IterSelector(bH,"[ws-attr-holes]",function(bU){var bV,bW,bX,bY;bV=new a.RegExp(U.TextHoleRE(),"g");bW=V.SplitChars(bU.getAttribute("ws-attr-holes"),[" "],1);bU.removeAttribute("ws-attr-holes");for(bX=0,bY=bW.length-1;bX<=bY;bX++)(function(){var bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$;b8=p.get(bW,bX);b9=bU.getAttribute(b8);bZ=null;b0=0;b_=[];while(bZ=bV.exec(b9),bZ!==null){b$=T.string(b9,{$:1,$0:b0},{$:1,$0:bV.lastIndex-p.get(bZ,0).length-1});b0=bV.lastIndex;b_.push([b$,p.get(bZ,1)]);}b2=T.string(b9,{$:1,$0:b0},null);bV.lastIndex=0;b3=p.foldBack(function(ca,cb){return(function(cc){var cd,ce;cd=cc[0];ce=cc[1];return function(cf){var cg,ch,ci,cj,ck;cg=cf[0];ch=cf[1];ci=(cj=(ck=null,[bR.TryGetValue(ce,{get:function(){return ck;},set:function(cl){ck=cl;}}),ck]),cj[0]?cj[1].$==1?{$:0,$0:cj[1].$1}:cj[1].$==2?{$:1,$0:cj[1].$1}:cj[1].$==7?{$:1,$0:cj[1].$1.get_View()}:cj[1].$==8?{$:1,$0:u.Map(a.String,cj[1].$1.get_View())}:cj[1].$==9?{$:1,$0:u.Map(function(cl){return cl.get_Input();},cj[1].$1.get_View())}:cj[1].$==10?{$:1,$0:u.Map(a.String,cj[1].$1.get_View())}:cj[1].$==11?{$:1,$0:u.Map(function(cl){return cl.get_Input();},cj[1].$1.get_View())}:cj[1].$==12?{$:1,$0:u.Map(a.String,cj[1].$1.get_View())}:(bE.warn("Attribute value hole filled with non-text data",ce),{$:0,$0:""}):{$:0,$0:""});return ci.$==1?[cd,new n({$:1,$0:cg===""?ci.$0:u.Map(function(cl){return cl+cg;},ci.$0),$1:ch})]:[cd+ci.$0+cg,ch];};}(ca))(cb);},b_,[b2,n.Empty]);return bL(bU,b3[1].$==1?b3[1].$1.$==1?b3[1].$1.$1.$==1?b3[1].$1.$1.$1.$==0?(b4=b3[0],_5.Dynamic(b8,u.Map3(function(ca,cb,cc){return b4+ca+cb+cc;},b3[1].$0,b3[1].$1.$0,b3[1].$1.$1.$0))):(b5=b3[0],_5.Dynamic(b8,u.Map(function(ca){return b5+V.concat("",ca);},u.Sequence(b3[1])))):(b6=b3[0],_5.Dynamic(b8,u.Map2(function(ca,cb){return b6+ca+cb;},b3[1].$0,b3[1].$1.$0))):b3[0]===""?_5.Dynamic(b8,b3[1].$0):(b7=b3[0],_5.Dynamic(b8,u.Map(function(ca){return b7+ca;},b3[1].$0))):_6.Create(b8,b3[0]));}());});return[bC.DeleteEmptyFields({Els:bJ,Dirty:true,Holes:bN,Attrs:bP,Render:(bK=bQ.length==0?null:{$:1,$0:function(bU){p.iter(function(bV){bV(bU);},bQ);}},bK?bK.$0:void 0)},["Render"]),_7.TreeReduce(u.Const(),u.Map2Unit,bO)];};M.Mk=function(bH,bI){return new M.New(bH,bI);};M.TextNode=function(bH){return M.Mk({$:5,$0:P.CreateText(bH)},u.Const());};M.TextView=function(bH){var bI;bI=U.CreateTextNode();return M.Mk({$:4,$0:bI},u.Map(function(bJ){U.UpdateTextNode(bI,bJ);},bH));};M.New=bC.Ctor(function(bH,bI){this.docNode=bH;this.updates=bI;},M);u=f.View=bC.Class({},null,u);N.TryParseInt32=function(bH,bI){return N.TryParse(bH,-2147483648,2147483647,bI);};O.GetFieldValues=function(bH){var bI,bJ;bI=[];for(var bK in bH)bI.push(bH[bK]);return bI;};P.ChildrenArray=function(bH){var bI,bJ,bK;bI=[];for(bJ=0,bK=bH.childNodes.length-1;bJ<=bK;bJ++)bI.push(bH.childNodes[bJ]);return bI;};P.IterSelector=function(bH,bI,bJ){var bK,bL,bM;bK=bH.querySelectorAll(bI);for(bL=0,bM=bK.length-1;bL<=bM;bL++)bJ(bK[bL]);};P.CreateText=function(bH){return P.Doc().createTextNode(bH);};P.SetAttr=function(bH,bI,bJ){bH.setAttribute(bI,bJ);};P.Doc=function(){br.$cctor();return br.Doc;};P.InsertAt=function(bH,bI,bJ){var bK;if(!(bJ.parentNode===bH&&bI===(bK=bJ.nextSibling,j.Equals(bK,null)?null:bK)))bH.insertBefore(bJ,bI);};P.RemoveNode=function(bH,bI){if(bI.parentNode===bH)bH.removeChild(bI);};S.$cctor=function(){S.$cctor=a.ignore;S.counter=0;};T.string=function(bH,bI,bJ){return bI==null?bJ!=null&&bJ.$==1?bH.slice(0,bJ.$0+1):"":bJ==null?bH.slice(bI.$0):bH.slice(bI.$0,bJ.$0+1);};U.TextHoleRE=function(){_2.$cctor();return _2.TextHoleRE;};U.LoadedTemplates=function(){_2.$cctor();return _2.LoadedTemplates;};U.LoadedTemplateFile=function(bH){var bI,bJ,bK;bI=(bJ=null,[U.LoadedTemplates().TryGetValue(bH,{get:function(){return bJ;},set:function(bL){bJ=bL;}}),bJ]);return bI[0]?bI[1]:(bK=new A.New$5(),(U.LoadedTemplates().set_Item(bH,bK),bK));};U.CreateRunState=function(bH,bI){return $.New(ba.get_Empty(),U.CreateElemNode(bH,_3.EmptyAttr(),bI));};U.PerformAnimatedUpdate=function(bH,bI){var bJ;return bb.get_UseAnimations()?(bJ=null,bf.Delay(function(){var bK,bL,bM;bK=ba.FindAll(bI);bL=U.ComputeChangeAnim(bH,bK);bM=U.ComputeEnterAnim(bH,bK);return bf.Bind(bb.Play(bb.Append(bL,U.ComputeExitAnim(bH,bK))),function(){return bf.Bind(U.SyncElemNodesNextFrame(bH),function(){return bf.Bind(bb.Play(bM),function(){bH.PreviousNodes=bK;return bf.Return(null);});});});})):U.SyncElemNodesNextFrame(bH);};U.LinkElement=function(bH,bI){U.InsertDoc(bH,bI,null);};U.InsertBeforeDelim=function(bH,bI){var bJ,bK;bJ=bH.parentNode;bK=a.document.createTextNode("");bJ.insertBefore(bK,bH);U.LinkPrevElement(bH,bI);return bK;};U.CreateElemNode=function(bH,bI,bJ){var bK;U.LinkElement(bH,bJ);bK=_3.Insert(bH,bI);return Z.New(bK,bJ,null,bH,F.Int(),bC.GetOptional(bK.OnAfterRender));};U.ComputeChangeAnim=function(bH,bI){var bJ;function bK(bL){return _3.HasChangeAnim(bL.Attr);}bJ=function(bL){return ba.Filter(bK,bL);};return bb.Concat(p.map(function(bL){return _3.GetChangeAnim(bL.Attr);},ba.ToArray(ba.Intersect(bJ(bH.PreviousNodes),bJ(bI)))));};U.ComputeEnterAnim=function(bH,bI){return bb.Concat(p.map(function(bJ){return _3.GetEnterAnim(bJ.Attr);},ba.ToArray(ba.Except(bH.PreviousNodes,ba.Filter(function(bJ){return _3.HasEnterAnim(bJ.Attr);},bI)))));};U.ComputeExitAnim=function(bH,bI){return bb.Concat(p.map(function(bJ){return _3.GetExitAnim(bJ.Attr);},ba.ToArray(ba.Except(bI,ba.Filter(function(bJ){return _3.HasExitAnim(bJ.Attr);},bH.PreviousNodes)))));};U.SyncElemNodesNextFrame=function(bH){function bI(bJ){a.requestAnimationFrame(function(){U.SyncElemNode(bH.Top);bJ();});}return bi.BatchUpdatesEnabled()?bf.FromContinuations(function(bJ,bK,bL){return bI.apply(null,[bJ,bK,bL]);}):(U.SyncElemNode(bH.Top),bf.Return(null));};U.CreateTextNode=function(){return{Text:P.CreateText(""),Dirty:false,Value:""};};U.UpdateTextNode=function(bH,bI){bH.Value=bI;bH.Dirty=true;};U.InsertDoc=function(bH,bI,bJ){var bK;return bI!=null&&bI.$==1?U.InsertNode(bH,bI.$0.El,bJ):bI!=null&&bI.$==2?(bK=bI.$0,(bK.Dirty=false,U.InsertDoc(bH,bK.Current,bJ))):bI==null?bJ:bI!=null&&bI.$==4?U.InsertNode(bH,bI.$0.Text,bJ):bI!=null&&bI.$==5?U.InsertNode(bH,bI.$0,bJ):bI!=null&&bI.$==6?p.foldBack(function(bL,bM){return bL.constructor===K?U.InsertDoc(bH,bL,bM):U.InsertNode(bH,bL,bM);},bI.$0.Els,bJ):U.InsertDoc(bH,bI.$0,U.InsertDoc(bH,bI.$1,bJ));};U.LinkPrevElement=function(bH,bI){U.InsertDoc(bH.parentNode,bI,bH);};U.SyncElemNode=function(bH){U.SyncElement(bH);U.Sync(bH.Children);U.AfterRender(bH);};U.InsertNode=function(bH,bI,bJ){P.InsertAt(bH,bJ,bI);return bI;};U.SyncElement=function(bH){function bI(bJ){function bK(bL){var bM,bN;return bL!=null&&bL.$==0?bK(bL.$0)||bK(bL.$1):bL!=null&&bL.$==2?(bM=bL.$0,bM.Dirty||bK(bM.Current)):bL!=null&&bL.$==6&&(bN=bL.$0,bN.Dirty||p.exists(bI,bN.Holes));}return bK(bJ.Children);}_3.Sync(bH.El,bH.Attr);bI(bH)?U.DoSyncElement(bH):void 0;};U.Sync=function(bH){var bI,bJ;if(bH!=null&&bH.$==1)U.SyncElemNode(bH.$0);else if(bH!=null&&bH.$==2)U.Sync(bH.$0.Current);else if(bH==null);else if(bH!=null&&bH.$==5);else if(bH!=null&&bH.$==4){bI=bH.$0;bI.Dirty?(bI.Text.nodeValue=bI.Value,bI.Dirty=false):void 0;}else if(bH!=null&&bH.$==6){bJ=bH.$0;p.iter(function(bK){U.SyncElemNode(bK);},bJ.Holes);p.iter(function(bK){_3.Sync(bK[0],bK[1]);},bJ.Attrs);U.AfterRender(bJ);}else{U.Sync(bH.$0);U.Sync(bH.$1);}};U.AfterRender=function(bH){var bI;bI=bC.GetOptional(bH.Render);bI!=null&&bI.$==1?(bI.$0(bH.El),bC.SetOptional(bH,"Render",null)):void 0;};U.DoSyncElement=function(bH){var bI,bJ,bK;function bL(bM,bN){var bO,bP;return bM!=null&&bM.$==1?bM.$0.El:bM!=null&&bM.$==2?(bO=bM.$0,bO.Dirty?(bO.Dirty=false,U.InsertDoc(bI,bO.Current,bN)):bL(bO.Current,bN)):bM==null?bN:bM!=null&&bM.$==4?bM.$0.Text:bM!=null&&bM.$==5?bM.$0:bM!=null&&bM.$==6?(bP=bM.$0,(bP.Dirty?bP.Dirty=false:void 0,p.foldBack(function(bQ,bR){return bQ.constructor===K?bL(bQ,bR):bQ;},bP.Els,bN))):bL(bM.$0,bL(bM.$1,bN));}bI=bH.El;by.Iter((bJ=bH.El,function(bM){P.RemoveNode(bJ,bM);}),by.Except(by.DocChildren(bH),by.Children(bH.El,bC.GetOptional(bH.Delimiters))));bL(bH.Children,(bK=bC.GetOptional(bH.Delimiters),bK!=null&&bK.$==1?bK.$0[1]:null));};V.concat=function(bH,bI){return p.ofSeq(bI).join(bH);};V.StartsWith=function(bH,bI){return bH.substring(0,bI.length)==bI;};V.SplitChars=function(bH,bI,bJ){return V.Split(bH,new a.RegExp("["+V.RegexEscape(bI.join(""))+"]"),bJ);};V.RegexEscape=function(bH){return bH.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};V.Split=function(bH,bI,bJ){return bJ===1?p.filter(function(bK){return bK!=="";},V.SplitWith(bH,bI)):V.SplitWith(bH,bI);};V.SplitWith=function(bH,bI){return bH.split(bI);};V.forall=function(bH,bI){return D.forall(bH,V.protect(bI));};V.protect=function(bH){return bH===null?"":bH;};X=f.Elt=bC.Class({},M,X);X.TreeNode=function(bH,bI){var bJ,bK;function bL(bM){return bM[1];}bJ=_8.Create(bI);return new X.New$1({$:6,$0:bH},u.Map2Unit((bK=p.map(function(bM){return _3.Updates(bL(bM));},bH.Attrs),_7.TreeReduce(u.Const(),u.Map2Unit,bK)),bJ.v),p.get(bH.Els,0),bJ);};X.New$1=bC.Ctor(function(bH,bI,bJ,bK){M.New.call(this,bH,bI);this.docNode$1=bH;this.updates$1=bI;this.elt=bJ;this.rvUpdates=bK;},X);Y.StartProcessor=function(bH){var bI;function bJ(){var bK;bK=null;return bf.Delay(function(){return bf.Bind(bH,function(){var bL;bL=bI[0];return bL===1?(bI[0]=0,bf.Zero()):bL===2?(bI[0]=1,bJ()):bf.Zero();});});}bI=[0];return function(){var bK;bK=bI[0];bK===0?(bI[0]=1,bf.Start(bJ(),null)):bK===1?bI[0]=2:void 0;};};Z=f.DocElemNode=bC.Class({Equals:function(bH){return this.ElKey===bH.ElKey;},GetHashCode:function(){return this.ElKey;}},null,Z);Z.New=function(bH,bI,bJ,bK,bL,bM){var bN;return new Z((bN={Attr:bH,Children:bI,El:bK,ElKey:bL},(bC.SetOptional(bN,"Delimiters",bJ),bC.SetOptional(bN,"Render",bM),bN)));};_0.concat=function(bH){var bI,bJ;bI=[];for(var bK in bH)bI.push.apply(bI,bH[bK]);return bI;};_1.Clear=function(bH){bH.splice(0,p.length(bH));};_2.$cctor=function(){_2.$cctor=a.ignore;_2.BatchUpdatesEnabled=true;_2.LoadedTemplates=new A.New$5();_2.LocalTemplatesLoaded=false;_2.TextHoleRE="\\${([^}]+)}";};_3.Insert=function(bH,bI){var bJ,bK,bL;function bM(bN){if(!(bN===null))if(bN!=null&&bN.$==1)bJ.push(bN.$0);else if(bN!=null&&bN.$==2){bM(bN.$0);bM(bN.$1);}else if(bN!=null&&bN.$==3)bN.$0(bH);else if(bN!=null&&bN.$==4)bK.push(bN.$0);}bJ=[];bK=[];bM(bI);bL=bJ.slice(0);return bd.New(bH,_3.Flags(bI),bL,bK.length===0?null:{$:1,$0:function(bN){D.iter(function(bO){bO(bN);},bK);}});};_3.Updates=function(bH){return _7.MapTreeReduce(function(bI){return bI.NChanged();},u.Const(),u.Map2Unit,bH.DynNodes);};_3.Empty=function(bH){return bd.New(bH,0,[],null);};_3.Flags=function(bH){return bH!==null&&bH.hasOwnProperty("flags")?bH.flags:0;};_3.Static=function(bH){return new _6({$:3,$0:bH});};_3.Dynamic=function(bH,bI){return new _6({$:1,$0:new bk.New(bH,bI)});};_3.EmptyAttr=function(){bl.$cctor();return bl.EmptyAttr;};_3.HasChangeAnim=function(bH){var bI;bI=4;return(bH.DynFlags&bI)===bI;};_3.GetChangeAnim=function(bH){return _3.GetAnim(bH,function(bI,bJ){return bI.NGetChangeAnim(bJ);});};_3.HasEnterAnim=function(bH){var bI;bI=1;return(bH.DynFlags&bI)===bI;};_3.GetEnterAnim=function(bH){return _3.GetAnim(bH,function(bI,bJ){return bI.NGetEnterAnim(bJ);});};_3.HasExitAnim=function(bH){var bI;bI=2;return(bH.DynFlags&bI)===bI;};_3.GetExitAnim=function(bH){return _3.GetAnim(bH,function(bI,bJ){return bI.NGetExitAnim(bJ);});};_3.AppendTree=function(bH,bI){var bJ;return bH===null?bI:bI===null?bH:(bJ=new _6({$:2,$0:bH,$1:bI}),(_3.SetFlags(bJ,_3.Flags(bH)|_3.Flags(bI)),bJ));};_3.GetAnim=function(bH,bI){return bb.Concat(p.map(function(bJ){return bI(bJ,bH.DynElem);},bH.DynNodes));};_3.SetFlags=function(bH,bI){bH.flags=bI;};_3.Sync=function(bH,bI){p.iter(function(bJ){bJ.NSync(bH);},bI.DynNodes);};_4=f.CheckedInput=bC.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,_4);_5.Handler=function(bH,bI){return _3.Static(function(bJ){bJ.addEventListener(bH,function(bK){return(bI(bJ))(bK);},false);});};_5.OnAfterRender=function(bH){return new _6({$:4,$0:bH});};_5.Value=function(bH){function bI(bJ){return{$:1,$0:bJ};}return _5.CustomValue(bH,a.id,function(bJ){return bI(a.id(bJ));});};_5.Checked=function(bH){function bI(bJ,bK){return!j.Equals(bH.Get(),bJ.checked)?bH.Set(bJ.checked):null;}return _6.Concat([_5.DynamicProp("checked",bH.get_View()),_5.Handler("change",function(bJ){return function(bK){return bI(bJ,bK);};}),_5.Handler("click",function(bJ){return function(bK){return bI(bJ,bK);};})]);};_5.IntValue=function(bH){return _5.CustomVar(bH,function(bI,bJ){var bK;bK=bJ.get_Input();return bI.value!==bK?void(bI.value=bK):null;},function(bI){var bJ,bK,bL;bJ=bI.value;return{$:1,$0:be.isBlank(bJ)?(bI.checkValidity?bI.checkValidity():true)?new _4({$:2,$0:bJ}):new _4({$:1,$0:bJ}):(bK=(bL=0,[N.TryParseInt32(bJ,{get:function(){return bL;},set:function(bM){bL=bM;}}),bL]),bK[0]?new _4({$:0,$0:bK[1],$1:bJ}):new _4({$:1,$0:bJ}))};});};_5.IntValueUnchecked=function(bH){return _5.CustomValue(bH,a.String,function(bI){var bJ;return be.isBlank(bI)?{$:1,$0:0}:(bJ=+bI,bJ!==bJ>>0?null:{$:1,$0:bJ});});};_5.FloatValue=function(bH){return _5.CustomVar(bH,function(bI,bJ){var bK;bK=bJ.get_Input();return bI.value!==bK?void(bI.value=bK):null;},function(bI){var bJ,bK;bJ=bI.value;return{$:1,$0:be.isBlank(bJ)?(bI.checkValidity?bI.checkValidity():true)?new _4({$:2,$0:bJ}):new _4({$:1,$0:bJ}):(bK=+bJ,a.isNaN(bK)?new _4({$:1,$0:bJ}):new _4({$:0,$0:bK,$1:bJ}))};});};_5.FloatValueUnchecked=function(bH){return _5.CustomValue(bH,a.String,function(bI){var bJ;return be.isBlank(bI)?{$:1,$0:0}:(bJ=+bI,a.isNaN(bJ)?null:{$:1,$0:bJ});});};_5.Dynamic=function(bH,bI){return _3.Dynamic(bI,function(bJ){return function(bK){return P.SetAttr(bJ,bH,bK);};});};_5.CustomValue=function(bH,bI,bJ){return _5.CustomVar(bH,function(bK,bL){bK.value=bI(bL);},function(bK){return bJ(bK.value);});};_5.DynamicProp=function(bH,bI){return _3.Dynamic(bI,function(bJ){return function(bK){bJ[bH]=bK;};});};_5.CustomVar=function(bH,bI,bJ){function bK(bM,bN){return bH.UpdateMaybe(function(bO){var bP,bQ;bP=bJ(bM);return bP!=null&&bP.$==1&&(!j.Equals(bP.$0,bO)&&(bQ=[bP,bP.$0],true))?bQ[0]:null;});}function bL(bM,bN){var bO,bP;bO=bJ(bM);return bO!=null&&bO.$==1&&(j.Equals(bO.$0,bN)&&(bP=bO.$0,true))?null:bI(bM,bN);}return _6.Concat([_5.Handler("change",function(bM){return function(bN){return bK(bM,bN);};}),_5.Handler("input",function(bM){return function(bN){return bK(bM,bN);};}),_5.Handler("keypress",function(bM){return function(bN){return bK(bM,bN);};}),_5.DynamicCustom(function(bM){return function(bN){return bL(bM,bN);};},bH.get_View())]);};_5.DynamicCustom=function(bH,bI){return _3.Dynamic(bI,bH);};_6=f.AttrProxy=bC.Class({},null,_6);_6.Handler=function(bH,bI){return _6.HandlerImpl(bH,bI);};_6.Concat=function(bH){var bI;bI=_7.ofSeqNonCopying(bH);return _7.TreeReduce(_3.EmptyAttr(),_6.Append,bI);};_6.Create=function(bH,bI){return _3.Static(function(bJ){P.SetAttr(bJ,bH,bI);});};_6.HandlerImpl=function(bH,bI){return _3.Static(function(bJ){bJ.addEventListener(bH,function(bK){return(bI(bJ))(bK);},false);});};_6.Append=function(bH,bI){return _3.AppendTree(bH,bI);};_7.TreeReduce=function(bH,bI,bJ){var bK;function bL(bM,bN){var bO,bP;return bN<=0?bH:bN===1&&(bM>=0&&bM<bK)?p.get(bJ,bM):(bP=bN/2>>0,bI(bL(bM,bP),bL(bM+bP,bN-bP)));}bK=p.length(bJ);return bL(0,bK);};_7.MapTreeReduce=function(bH,bI,bJ,bK){var bL;function bM(bN,bO){var bP,bQ;return bO<=0?bI:bO===1&&(bN>=0&&bN<bL)?bH(p.get(bK,bN)):(bQ=bO/2>>0,bJ(bM(bN,bQ),bM(bN+bQ,bO-bQ)));}bL=p.length(bK);return bM(0,bL);};_7.ofSeqNonCopying=function(bH){var bI,bJ;if(bH instanceof a.Array)return bH;else if(bH instanceof n)return p.ofList(bH);else if(bH===null)return[];else{bI=[];bJ=J.Get(bH);try{while(bJ.MoveNext())bI.push(bJ.Current());return bI;}finally{if("Dispose"in bJ)bJ.Dispose();}}};_8=f.Updates=bC.Class({},null,_8);_8.Create=function(bH){var bI;bI=null;bI=_8.New(bH,null,function(){var bJ;bJ=bI.s;return bJ===null?(bJ=y.Copy(bI.c()),bI.s=bJ,y.WhenObsoleteRun(bJ,function(){bI.s=null;}),bJ):bJ;});return bI;};_8.New=function(bH,bI,bJ){return new _8({c:bH,s:bI,v:bJ});};$.New=function(bH,bI){return{PreviousNodes:bH,Top:bI};};ba.get_Empty=function(){return{$:0,$0:new B.New$3()};};ba.FindAll=function(bH){var bI;function bJ(bL){if(bL!=null&&bL.$==0){bJ(bL.$0);bJ(bL.$1);}else if(bL!=null&&bL.$==1)bK(bL.$0);else if(bL!=null&&bL.$==2)bJ(bL.$0.Current);else if(bL!=null&&bL.$==6)p.iter(bK,bL.$0.Holes);}function bK(bL){bI.push(bL);bJ(bL.Children);}bI=[];bJ(bH);return{$:0,$0:new B.New$2(bI)};};ba.Filter=function(bH,bI){return{$:0,$0:bq.Filter(bH,bI.$0)};};ba.Intersect=function(bH,bI){return{$:0,$0:bq.Intersect(bH.$0,bI.$0)};};ba.ToArray=function(bH){return bq.ToArray(bH.$0);};ba.Except=function(bH,bI){return{$:0,$0:bq.Except(bH.$0,bI.$0)};};bb.get_UseAnimations=function(){return bg.UseAnimations();};bb.Play=function(bH){var bI;bI=null;return bf.Delay(function(){return bf.Bind(bb.Run(a.ignore,bg.Actions(bH)),function(){bg.Finalize(bH);return bf.Return(null);});});};bb.Append=function(bH,bI){return{$:0,$0:bh.Append(bH.$0,bI.$0)};};bb.Concat=function(bH){return{$:0,$0:bh.Concat(D.map(bg.List,bH))};};bb.Run=function(bH,bI){var bJ;function bK(bL){function bM(bN,bO){var bP;bP=bO-bN;bI.Compute(bP);bH();return bP<=bJ?void a.requestAnimationFrame(function(bQ){bM(bN,bQ);}):bL();}a.requestAnimationFrame(function(bN){bM(bN,bN);});}bJ=bI.Duration;return bJ===0?bf.Zero():bf.FromContinuations(function(bL,bM,bN){return bK.apply(null,[bL,bM,bN]);});};bb.get_Empty=function(){return{$:0,$0:bh.Empty()};};bd.New=function(bH,bI,bJ,bK){var bL;bL={DynElem:bH,DynFlags:bI,DynNodes:bJ};bC.SetOptional(bL,"OnAfterRender",bK);return bL;};be.isBlank=function(bH){return V.forall(bj.IsWhiteSpace,bH);};bf.Delay=function(bH){return function(bI){try{(bH(null))(bI);}catch(bJ){bI.k({$:1,$0:bJ});}};};bf.Bind=function(bH,bI){return bf.checkCancel(function(bJ){bH(bm.New(function(bK){var bL;if(bK.$==0){bL=bK.$0;bf.scheduler().Fork(function(){try{(bI(bL))(bJ);}catch(bM){bJ.k({$:1,$0:bM});}});}else bf.scheduler().Fork(function(){bJ.k(bK);});},bJ.ct));});};bf.Zero=function(){bn.$cctor();return bn.Zero;};bf.Start=function(bH,bI){var bJ,bK;bJ=(bK=(bf.defCTS())[0],bI==null?bK:bI.$0);bf.scheduler().Fork(function(){if(!bJ.c)bH(bm.New(function(bL){if(bL.$==1)bf.UncaughtAsyncError(bL.$0);},bJ));});};bf.Return=function(bH){return function(bI){bI.k({$:0,$0:bH});};};bf.checkCancel=function(bH){return function(bI){if(bI.ct.c)bf.cancel(bI);else bH(bI);};};bf.defCTS=function(){bn.$cctor();return bn.defCTS;};bf.UncaughtAsyncError=function(bH){bE.log("WebSharper: Uncaught asynchronous exception",bH);};bf.FromContinuations=function(bH){return function(bI){var bJ;function bK(bL){if(bJ[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bJ[0]=true;bf.scheduler().Fork(bL);}}bJ=[false];bH(function(bL){bK(function(){bI.k({$:0,$0:bL});});},function(bL){bK(function(){bI.k({$:1,$0:bL});});},function(bL){bK(function(){bI.k({$:2,$0:bL});});});};};bf.cancel=function(bH){bH.k({$:2,$0:new bv.New(bH.ct)});};bf.scheduler=function(){bn.$cctor();return bn.scheduler;};bg.UseAnimations=function(){bp.$cctor();return bp.UseAnimations;};bg.Actions=function(bH){return bg.ConcatActions(p.choose(function(bI){return bI.$==1?{$:1,$0:bI.$0}:null;},bh.ToArray(bH.$0)));};bg.Finalize=function(bH){p.iter(function(bI){if(bI.$==0)bI.$0();},bh.ToArray(bH.$0));};bg.List=function(bH){return bH.$0;};bg.ConcatActions=function(bH){var bI,bJ,bK,bL;bI=_7.ofSeqNonCopying(bH);bJ=p.length(bI);return bJ===0?bg.Const():bJ===1?p.get(bI,0):(bK=D.max(D.map(function(bM){return bM.Duration;},bI)),(bL=p.map(function(bM){return bg.Prolong(bK,bM);},bI),bg.Def(bK,function(bM){p.iter(function(bN){bN.Compute(bM);},bL);})));};bg.Const=function(bH){return bg.Def(0,function(){return bH;});};bg.Prolong=function(bH,bI){var bJ,bK,bL;bJ=bI.Compute;bK=bI.Duration;bL=bx.Create(function(){return bI.Compute(bI.Duration);});return{Compute:function(bM){return bM>=bK?bL.f():bJ(bM);},Duration:bH};};bg.Def=function(bH,bI){return{Compute:bI,Duration:bH};};bh.Append=function(bH,bI){return bH.$==0?bI:bI.$==0?bH:{$:2,$0:bH,$1:bI};};bh.Concat=function(bH){var bI;bI=_7.ofSeqNonCopying(bH);return _7.TreeReduce(bh.Empty(),bh.Append,bI);};bh.ToArray=function(bH){var bI;function bJ(bK){if(bK.$==1)bI.push(bK.$0);else if(bK.$==2){bJ(bK.$0);bJ(bK.$1);}else if(bK.$==3)p.iter(function(bL){bI.push(bL);},bK.$0);}bI=[];bJ(bH);return bI.slice(0);};bh.Empty=function(){bw.$cctor();return bw.Empty;};bi.BatchUpdatesEnabled=function(){_2.$cctor();return _2.BatchUpdatesEnabled;};bj.IsWhiteSpace=function(bH){return bH.match(new a.RegExp("\\s"))!==null;};N.TryParse=function(bH,bI,bJ,bK){var bL,bM;bL=+bH;bM=bL===bL-bL%1&&bL>=bI&&bL<=bJ;bM?bK.set(bL):void 0;return bM;};bk=f.DynamicAttrNode=bC.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bH){return bb.get_Empty();},NGetEnterAnim:function(bH){return bb.get_Empty();},NGetExitAnim:function(bH){return bb.get_Empty();},NSync:function(bH){if(this.dirty){(this.push(bH))(this.value);this.dirty=false;}}},h,bk);bk.New=bC.Ctor(function(bH,bI){var bJ;bJ=this;this.push=bI;this.value=void 0;this.dirty=false;this.updates=u.Map(function(bK){bJ.value=bK;bJ.dirty=true;},bH);},bk);bl.$cctor=function(){bl.$cctor=a.ignore;bl.EmptyAttr=null;};bm.New=function(bH,bI){return{k:bH,ct:bI};};bn.$cctor=function(){bn.$cctor=a.ignore;bn.noneCT=bo.New(false,[]);bn.scheduler=new bs.New();bn.defCTS=[new bt.New()];bn.Zero=bf.Return();bn.GetCT=function(bH){bH.k({$:0,$0:bH.ct});};};bo.New=function(bH,bI){return{c:bH,r:bI};};bp.$cctor=function(){bp.$cctor=a.ignore;bp.CubicInOut=bu.Custom(function(bH){var bI;bI=bH*bH;return 3*bI-2*(bI*bH);});bp.UseAnimations=true;};bq.Filter=function(bH,bI){return new B.New$2(p.filter(bH,bq.ToArray(bI)));};bq.Intersect=function(bH,bI){var bJ;bJ=new B.New$2(bq.ToArray(bH));bJ.IntersectWith(bq.ToArray(bI));return bJ;};bq.ToArray=function(bH){var bI;bI=p.create(bH.get_Count(),void 0);bH.CopyTo(bI);return bI;};bq.Except=function(bH,bI){var bJ;bJ=new B.New$2(bq.ToArray(bI));bJ.ExceptWith(bq.ToArray(bH));return bJ;};m.head=function(bH){return bH.$==1?bH.$0:m.listEmpty();};m.tail=function(bH){return bH.$==1?bH.$1:m.listEmpty();};m.listEmpty=function(){return i.FailWith("The input list was empty.");};br.$cctor=function(){br.$cctor=a.ignore;br.Doc=a.document;};bs=bf.Scheduler=bC.Class({Fork:function(bH){var bI;bI=this;this.robin.push(bH);this.idle?(this.idle=false,a.setTimeout(function(){bI.tick();},0)):void 0;},tick:function(){var bH,bI,bJ;bI=this;bJ=bG.now();bH=true;while(bH)if(this.robin.length===0){this.idle=true;bH=false;}else{(this.robin.shift())();bG.now()-bJ>40?(a.setTimeout(function(){bI.tick();},0),bH=false):void 0;}}},h,bs);bs.New=bC.Ctor(function(){this.idle=true;this.robin=[];},bs);bt=e.CancellationTokenSource=bC.Class({},h,bt);bt.New=bC.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bt);bu=f.Easing=bC.Class({},h,bu);bu.Custom=function(bH){return new bu.New(bH);};bu.New=bC.Ctor(function(bH){this.transformTime=bH;},bu);bv=e.OperationCanceledException=bC.Class({},null,bv);bv.New=bC.Ctor(function(bH){bv.New$1.call(this,"The operation was canceled.",null,bH);},bv);bv.New$1=bC.Ctor(function(bH,bI,bJ){this.message=bH;this.inner=bI;this.ct=bJ;},bv);bw.$cctor=function(){bw.$cctor=a.ignore;bw.Empty={$:0};};bx.Create=function(bH){return bA.New(false,bH,bx.forceLazy);};bx.forceLazy=function(){var bH;bH=this.v();this.c=true;this.v=bH;this.f=bx.cachedLazy;return bH;};bx.cachedLazy=function(){return this.v;};by.DocChildren=function(bH){var bI;function bJ(bK){if(bK!=null&&bK.$==2)bJ(bK.$0.Current);else if(bK!=null&&bK.$==1)bI.push(bK.$0.El);else if(bK==null);else if(bK!=null&&bK.$==5)bI.push(bK.$0);else if(bK!=null&&bK.$==4)bI.push(bK.$0.Text);else if(bK!=null&&bK.$==6)p.iter(function(bL){if(bL.constructor===K)bJ(bL);else bI.push(bL);},bK.$0.Els);else{bJ(bK.$0);bJ(bK.$1);}}bI=[];bJ(bH.Children);return{$:0,$0:_7.ofSeqNonCopying(bI)};};by.Children=function(bH,bI){var bJ,bK,bL;if(bI!=null&&bI.$==1){bL=[];bJ=bI.$0[0].nextSibling;while(bJ!==bI.$0[1]){bL.push(bJ);bJ=bJ.nextSibling;}return{$:0,$0:bL};}else return{$:0,$0:p.init(bH.childNodes.length,(bK=bH.childNodes,function(bM){return bK[bM];}))};};by.Except=function(bH,bI){var bJ;bJ=bH.$0;return{$:0,$0:p.filter(function(bK){return p.forall(function(bL){return!(bK===bL);},bJ);},bI.$0)};};by.Iter=function(bH,bI){p.iter(bH,bI.$0);};bA.New=function(bH,bI,bJ){return{c:bH,v:bI,f:bJ};};bC.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
